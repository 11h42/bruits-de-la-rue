{% extends "base.html" %}
{% block content %}

    <div class="container">
        <div data-ng-app="bidsModule">
            <div data-ng-controller="bidController">
                <div class="alert alert-danger" role="alert" ng-show="errorMessage">{$ errorMessage $}</div>
                <div class="panel panel-default">
                    <div class="panel-body">
                        Les champs marqués d'une étoile (<span class="text-danger">*</span>) sont obligatoires.
                    </div>
                </div>
                <form ng-submit="createBid()" role="form" enctype="multipart/form-data">
                    {% include "forms/bid_form.html" %}
                </form>
            </div>
        </div>
    </div>
{% endblock %}
{% block javascript %}
    <script type="text/javascript" src="/static/js/bidModule.js"></script>
    <script type="text/javascript" src="/static/bower_components/moment/min/moment-with-locales.min.js"></script>
    <script type="text/javascript"
            src="/static/bower_components/angular-bootstrap-datetimepicker/src/js/datetimepicker.js"></script>
    <script type="text/javascript"
            src="/static/bower_components/jquery-file-upload/js/vendor/jquery.ui.widget.js"></script>
    <script type="text/javascript"
            src="/static/bower_components/jquery-file-upload/js/jquery.fileupload.js"></script>
    <script type="text/javascript"
            src="/static/bower_components/jquery-file-upload/js/jquery.iframe-transport.js"></script>

    <script>
        $(function () {
            $('#bid_image').fileupload({
                dataType: 'json',
                add: function (e, data) {
                    data.submit();
                },
                done: function (e, data) {
                },
                progressall: function (e, data) {
                    var progress = parseInt(data.loaded / data.total * 100, 10);
                    $('#progress').find('.bar').css(
                            'width',
                                    progress + '%'
                    );
                }
            });
        });
    </script>

{% endblock %}